# EV-TriFocus 基于智能体决策的电动汽车有序充电调度策略——兼顾用户体验、电网友好度与运营商利润的协同优化。

## 项目简介
EV-TriFocus是一个创新的电动汽车充电调度系统，采用多目标优化算法实现智能调度。系统通过平衡用户体验、运营效益和电网友好性三个维度，在保证用户满意度的同时，实现充电资源的高效分配和电网负载的合理调控。

## 系统特点

### 1. 多类型充电设施
#### 超级快充（Super Fast）
- 功率范围：250-400kW
- 站点占比：10%
- 价格系数：1.5x
- 充电特性：
  * 0-50% SOC：满功率充电
  * 50-80% SOC：功率降低30%
  * 80%以上：功率降低90%
- 典型充电时间：20%-80% SOC约15-25分钟
- 适用场景：长途中继、应急充电

#### 快速充电（Fast）
- 功率范围：60-120kW
- 站点占比：40%
- 价格系数：1.2x
- 充电特性：
  * 0-50% SOC：满功率充电
  * 50-80% SOC：功率降低40%
  * 80%以上：功率降低80%
- 典型充电时间：20%-80% SOC约45-60分钟
- 适用场景：城市快充、商业区域

#### 标准充电（Normal）
- 功率范围：7-20kW
- 站点占比：50%
- 价格系数：1.0x
- 充电特性：
  * 0-50% SOC：满功率充电
  * 50-90% SOC：功率降低20%
  * 90%以上：功率降低70%
- 典型充电时间：20%-100% SOC约6-8小时
- 适用场景：居民区、工作场所

### 2. 智能调度系统

#### 充电效率管理
1. 电池状态自适应
   - SOC感知充电功率调节
   - 动态目标SOC设定（默认85%）
   - 最小充电量保证（至少50%）

2. 环境因素补偿
   - 温度自适应：
     * 低温（<0℃）：效率降低40%
     * 较低温（0-10℃）：效率降低20%
     * 高温（>40℃）：效率降低15%
     * 较高温（30-40℃）：效率降低10%
   - 充电时长影响：
     * 电池内阻动态计算
     * 3小时后效率降低30%
     * 最低效率保持70%
   - 设备波动补偿：
     * 稳定性范围：0.95-1.0

#### 队列管理系统
1. 智能分配
   - 多因素评分机制
   - 实时负载均衡
   - 动态优先级调整

2. 等待管理
   - 最大队列长度：10
   - 智能排队系统
   - 实时状态更新

3. 完成后处理
   - 快速切换机制
   - 1-3步等待时间
   - 自动下一位调度

### 3. 多目标优化

#### 用户满意度
- 等待时间优化
- 充电时间控制
- 价格满意度平衡
- 充电完成度保证
- 个性化推荐

#### 运营商效益
- 设备利用率优化
- 收入最大化策略
- 峰谷价差利用
- 动态定价系统
- 设备维护预测

#### 电网友好性
- 负载均衡控制
- 可再生能源消纳
- 峰谷填谷策略
- 区域负载分散
- 电网稳定性维护

## 系统配置

### 环境配置
```json
{
    "environment": {
        "charger_count": 60,        // 充电桩总数
        "station_count": 20,        // 充电站数量
        "chargers_per_station": 4,  // 每站充电桩数
        "user_count": 100,         // 用户数量
        "simulation_days": 7,      // 模拟天数
        "time_step_minutes": 20,   // 时间步长
        "region_count": 8,        // 区域数量
        "charger_failure_rate": 0.0 // 故障率
    }
}
```

### 调度算法配置
```json
{
    "scheduler": {
        "scheduling_algorithm": "rule_based",  // 可选: rule_based, coordinated_mas, marl, uncoordinated
        "optimization_weights": {
            "user_satisfaction": 0.35,  // 用户满意度权重
            "operator_profit": 0.35,    // 运营商利润权重
            "grid_friendliness": 0.30   // 电网友好度权重
        },
        "marl_config": {
            "learning_rate": 0.01,
            "discount_factor": 0.95,
            "exploration_rate": 0.1
        }
    }
}
```


## 快速开始


### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行系统
```bash
python app.py [--cli] [--days 7] [--strategy balanced] [--algorithm rule_based]
```

### 3. 访问界面
http://localhost:5000