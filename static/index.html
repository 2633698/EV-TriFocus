<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电动汽车有序充电调度系统 - 控制面板</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
            background-color: #f5f7fa;
        }
        .card {
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(0,0,0,0.1);
        }
        .card-header {
            background-color: #fff;
            border-bottom: 1px solid #edf2f9;
            padding: 15px 20px;
            font-weight: 600;
        }
        .system-title {
            background: linear-gradient(135deg, #3a8ffe 0%, #1e55e8 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(62, 121, 247, 0.2);
        }
        .nav-pills .nav-link.active {
            background-color: #3a8ffe;
        }
        .tab-content {
            padding: 20px 0;
        }
        .result-image {
            width: 100%;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .result-image:hover {
            transform: scale(1.02);
        }
        .form-control, .form-select {
            border-radius: 8px;
            padding: 10px 15px;
            border: 1px solid #e0e6ed;
        }
        .btn-primary {
            background: linear-gradient(135deg, #3a8ffe 0%, #1e55e8 100%);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(62, 121, 247, 0.2);
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #1e55e8 0%, #0c38b5 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(62, 121, 247, 0.3);
        }
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        .metric-card {
            text-align: center;
            padding: 20px;
        }
        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 10px 0;
            color: #3a8ffe;
        }
        .metric-title {
            font-size: 0.9rem;
            color: #8392ab;
            margin-bottom: 0;
        }
        .progress {
            height: 8px;
            margin-top: 10px;
        }
        #simulationProgress {
            display: none;
        }
        .charger-status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .charger-status-available {
            background-color: #2dce89;
        }
        .charger-status-busy {
            background-color: #fb6340;
        }
        .charger-status-maintenance {
            background-color: #f5a623;
        }
        .modal-img {
            width: 100%;
        }
        .dashboard-container {
            overflow-x: hidden;
        }
        .chart-container {
            width: 100%;
            height: 300px;
        }
        #strategyComparisonChart, #hourlyLoadChart, #userTypeChart {
            width: 100%;
            height: 100%;
        }
        .dashboard-title {
            color: #5e72e4;
            font-weight: 600;
        }
        .tab-pane {
            padding: 15px 0;
        }
        .table th {
            font-weight: 600;
            color: #8392ab;
        }
        @media (max-width: 992px) {
            .metric-value {
                font-size: 1.8rem;
            }
        }
        #modelSettings {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container-fluid dashboard-container">
        <div class="row my-4">
            <div class="col-lg-12">
                <div class="system-title text-center">
                    <h1><i class="fas fa-charging-station me-2"></i>电动汽车有序充电调度系统</h1>
                    <p class="mb-0">智能调度 · 优化体验 · 电网友好</p>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- 左侧操作面板 -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>系统操作</h5>
                        <span class="status-badge bg-success">系统在线</span>
                    </div>
                    <div class="card-body">
                        <form id="controlForm">
                            <div class="mb-3">
                                <label for="runMode" class="form-label">运行模式</label>
                                <select class="form-select" id="runMode">
                                    <option value="simulate">运行模拟</option>
                                    <option value="train">训练模型</option>
                                    <option value="evaluate">评估策略</option>
                                    <option value="visualize">生成可视化</option>
                                    <option value="test">测试系统</option>
                                    <option value="all">全流程运行</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="strategy" class="form-label">调度策略</label>
                                <select class="form-select" id="strategy">
                                    <option value="user">用户优先</option>
                                    <option value="profit">利润优先</option>
                                    <option value="grid">电网友好优先</option>
                                    <option value="balanced" selected>平衡策略</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="days" class="form-label">模拟天数</label>
                                <input type="number" class="form-control" id="days" min="1" max="30" value="7">
                            </div>
                            <div class="mb-3">
                                <label for="outputDir" class="form-label">输出目录</label>
                                <input type="text" class="form-control" id="outputDir" value="output">
                            </div>
                            <div class="mb-3">
                                <label for="logLevel" class="form-label">日志级别</label>
                                <select class="form-select" id="logLevel">
                                    <option value="DEBUG">DEBUG</option>
                                    <option value="INFO" selected>INFO</option>
                                    <option value="WARNING">WARNING</option>
                                    <option value="ERROR">ERROR</option>
                                    <option value="CRITICAL">CRITICAL</option>
                                </select>
                            </div>
                            <div id="modelSettings" class="mb-3">
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="useTrainedModel" checked>
                                    <label class="form-check-label" for="useTrainedModel">使用预训练模型</label>
                                </div>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="button" id="runButton" class="btn btn-primary">
                                    <i class="fas fa-play me-2"></i>执行操作
                                </button>
                            </div>
                        </form>

                        <div id="simulationProgress" class="mt-4">
                            <p class="mb-2">模拟进度: <span id="progressText">0%</span></p>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" id="progressBar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="mt-3 text-center" id="statusMessage">
                                正在初始化系统...
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-sliders-h me-2"></i>高级配置</h5>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-pills mb-3" id="configTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="environment-tab" data-bs-toggle="pill" data-bs-target="#environment" type="button" role="tab" aria-controls="environment" aria-selected="true">环境</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="model-tab" data-bs-toggle="pill" data-bs-target="#model" type="button" role="tab" aria-controls="model" aria-selected="false">模型</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="weights-tab" data-bs-toggle="pill" data-bs-target="#weights" type="button" role="tab" aria-controls="weights" aria-selected="false">权重</button>
                            </li>
                        </ul>
                        <div class="tab-content" id="configTabsContent">
                            <div class="tab-pane fade show active" id="environment" role="tabpanel" aria-labelledby="environment-tab">
                                <div class="mb-3">
                                    <label for="gridId" class="form-label">电网ID</label>
                                    <input type="text" class="form-control" id="gridId" value="DEFAULT001">
                                </div>
                                <div class="mb-3">
                                    <label for="chargerCount" class="form-label">充电桩数量</label>
                                    <input type="number" class="form-control" id="chargerCount" min="5" max="100" value="20">
                                </div>
                                <div class="mb-3">
                                    <label for="userCount" class="form-label">用户数量</label>
                                    <input type="number" class="form-control" id="userCount" min="10" max="500" value="50">
                                </div>
                                <div class="mb-3">
                                    <label for="timeStep" class="form-label">时间步长(分钟)</label>
                                    <select class="form-select" id="timeStep">
                                        <option value="5">5分钟</option>
                                        <option value="10">10分钟</option>
                                        <option value="15" selected>15分钟</option>
                                        <option value="30">30分钟</option>
                                    </select>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="model" role="tabpanel" aria-labelledby="model-tab">
                                <div class="mb-3">
                                    <label for="hiddenDim" class="form-label">隐藏层维度</label>
                                    <input type="number" class="form-control" id="hiddenDim" min="32" max="512" value="128">
                                </div>
                                <div class="mb-3">
                                    <label for="taskHiddenDim" class="form-label">任务层维度</label>
                                    <input type="number" class="form-control" id="taskHiddenDim" min="16" max="256" value="64">
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="useTrainedModel" checked>
                                    <label class="form-check-label" for="useTrainedModel">使用预训练模型</label>
                                </div>
                                <div class="mb-3">
                                    <label for="modelPath" class="form-label">模型路径</label>
                                    <input type="text" class="form-control" id="modelPath" value="models/ev_charging_model.pth">
                                </div>
                            </div>
                            <div class="tab-pane fade" id="weights" role="tabpanel" aria-labelledby="weights-tab">
                                <div id="strategyWeightsContainer">
                                    <div class="mb-3">
                                        <label for="userSatisfactionWeight" class="form-label">用户满意度权重</label>
                                        <input type="range" class="form-range" id="userSatisfactionWeight" min="0.1" max="0.9" step="0.05" value="0.4">
                                        <div class="d-flex justify-content-between">
                                            <span class="badge bg-secondary">0.1</span>
                                            <span class="badge bg-primary" id="userWeightValue">0.4</span>
                                            <span class="badge bg-secondary">0.9</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="operatorProfitWeight" class="form-label">运营商利润权重</label>
                                        <input type="range" class="form-range" id="operatorProfitWeight" min="0.1" max="0.9" step="0.05" value="0.3">
                                        <div class="d-flex justify-content-between">
                                            <span class="badge bg-secondary">0.1</span>
                                            <span class="badge bg-primary" id="profitWeightValue">0.3</span>
                                            <span class="badge bg-secondary">0.9</span>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="gridFriendlinessWeight" class="form-label">电网友好度权重</label>
                                        <input type="range" class="form-range" id="gridFriendlinessWeight" min="0.1" max="0.9" step="0.05" value="0.3">
                                        <div class="d-flex justify-content-between">
                                            <span class="badge bg-secondary">0.1</span>
                                            <span class="badge bg-primary" id="gridWeightValue">0.3</span>
                                            <span class="badge bg-secondary">0.9</span>
                                        </div>
                                    </div>
                                    <div class="alert alert-info">
                                        <small>注意: 三项权重之和约等于1.0</small>
                                        <div>总和: <span id="weightSum">1.0</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧结果展示 -->
            <div class="col-lg-8">
                <!-- 核心指标卡片 -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="metric-title">用户满意度</div>
                            <div class="metric-value" id="userSatisfaction">-</div>
                            <div class="progress">
                                <div class="progress-bar bg-success" id="userSatisfactionBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="metric-title">运营商利润</div>
                            <div class="metric-value" id="operatorProfit">-</div>
                            <div class="progress">
                                <div class="progress-bar bg-primary" id="operatorProfitBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="metric-title">电网友好度</div>
                            <div class="metric-value" id="gridFriendliness">-</div>
                            <div class="progress">
                                <div class="progress-bar bg-info" id="gridFriendlinessBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card metric-card">
                            <div class="metric-title">综合评分</div>
                            <div class="metric-value" id="totalReward">-</div>
                            <div class="progress">
                                <div class="progress-bar bg-warning" id="totalRewardBar" role="progressbar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 结果展示面板 -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>系统分析结果</h5>
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-outline-primary" id="refreshResults">
                                <i class="fas fa-sync-alt me-1"></i>刷新
                            </button>
                            <button type="button" class="btn btn-sm btn-outline-success" id="exportResults">
                                <i class="fas fa-file-export me-1"></i>导出
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-pills mb-3" id="resultTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="dashboard-tab" data-bs-toggle="pill" data-bs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">实时看板</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="report-tab" data-bs-toggle="pill" data-bs-target="#report" type="button" role="tab" aria-controls="report" aria-selected="false">评估报告</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="users-tab" data-bs-toggle="pill" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="false">用户分析</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="grid-tab" data-bs-toggle="pill" data-bs-target="#grid" type="button" role="tab" aria-controls="grid" aria-selected="false">电网分析</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="comparison-tab" data-bs-toggle="pill" data-bs-target="#comparison" type="button" role="tab" aria-controls="comparison" aria-selected="false">策略对比</button>
                            </li>
                        </ul>
                        <div class="tab-content" id="resultTabsContent">
                            <!-- 实时看板 -->
                            <div class="tab-pane fade show active" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                                <h5 class="dashboard-title">实时充电状态</h5>
                                <div class="row mb-4">
                                    <div class="col-lg-4">
                                        <div class="chart-container">
                                            <canvas id="realTimeLoad"></canvas>
                                        </div>
                                        <div class="text-center mt-2">电网负载实时曲线</div>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>充电桩ID</th>
                                                        <th>位置</th>
                                                        <th>类型</th>
                                                        <th>状态</th>
                                                        <th>队列长度</th>
                                                        <th>健康值</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="chargerTableBody">
                                                    <tr>
                                                        <td>CQ_1001</td>
                                                        <td>城东商圈</td>
                                                        <td>快充</td>
                                                        <td><span class="charger-status-indicator charger-status-available"></span>空闲</td>
                                                        <td>0</td>
                                                        <td>92%</td>
                                                    </tr>
                                                    <tr>
                                                        <td>CQ_1002</td>
                                                        <td>西区工业园</td>
                                                        <td>快充</td>
                                                        <td><span class="charger-status-indicator charger-status-busy"></span>使用中</td>
                                                        <td>2</td>
                                                        <td>85%</td>
                                                    </tr>
                                                    <tr>
                                                        <td>CQ_1003</td>
                                                        <td>南湖科技园</td>
                                                        <td>慢充</td>
                                                        <td><span class="charger-status-indicator charger-status-maintenance"></span>维护中</td>
                                                        <td>0</td>
                                                        <td>75%</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <h5 class="dashboard-title">当前调度决策</h5>
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>用户ID</th>
                                                <th>用户类型</th>
                                                <th>当前SOC</th>
                                                <th>分配充电桩</th>
                                                <th>预计等待时间</th>
                                                <th>预计费用</th>
                                            </tr>
                                        </thead>
                                        <tbody id="schedulingTableBody">
                                            <tr>
                                                <td>EV2024_3001</td>
                                                <td>出租车</td>
                                                <td>25%</td>
                                                <td>CQ_1005</td>
                                                <td>5分钟</td>
                                                <td>¥45.5</td>
                                            </tr>
                                            <tr>
                                                <td>EV2024_3015</td>
                                                <td>私家车</td>
                                                <td>35%</td>
                                                <td>CQ_1002</td>
                                                <td>15分钟</td>
                                                <td>¥38.2</td>
                                            </tr>
                                            <tr>
                                                <td>EV2024_3022</td>
                                                <td>网约车</td>
                                                <td>15%</td>
                                                <td>CQ_1007</td>
                                                <td>10分钟</td>
                                                <td>¥42.8</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- 评估报告 -->
                            <div class="tab-pane fade" id="report" role="tabpanel" aria-labelledby="report-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <img src="/api/placeholder/550/350" class="result-image" id="chargingResultImage" alt="充电调度结果" data-bs-toggle="modal" data-bs-target="#imageModal">
                                        <p class="text-center">充电调度结果图表</p>
                                    </div>
                                    <div class="col-md-6">
                                        <img src="/api/placeholder/550/350" class="result-image" id="learningCurvesImage" alt="学习曲线" data-bs-toggle="modal" data-bs-target="#imageModal">
                                        <p class="text-center">模型学习曲线</p>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <h5 class="dashboard-title">综合评价指标</h5>
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>指标名称</th>
                                                    <th>平均值</th>
                                                    <th>最高值</th>
                                                    <th>最低值</th>
                                                    <th>标准差</th>
                                                </tr>
                                            </thead>
                                            <tbody id="evaluationTableBody">
                                                <tr>
                                                    <td>用户满意度</td>
                                                    <td>0.8245</td>
                                                    <td>0.9321</td>
                                                    <td>0.6852</td>
                                                    <td>0.0623</td>
                                                </tr>
                                                <tr>
                                                    <td>运营商利润</td>
                                                    <td>0.7536</td>
                                                    <td>0.8967</td>
                                                    <td>0.5432</td>
                                                    <td>0.0854</td>
                                                </tr>
                                                <tr>
                                                    <td>电网友好度</td>
                                                    <td>0.7812</td>
                                                    <td>0.9105</td>
                                                    <td>0.5219</td>
                                                    <td>0.0921</td>
                                                </tr>
                                                <tr>
                                                    <td>综合奖励</td>
                                                    <td>0.7865</td>
                                                    <td>0.8932</td>
                                                    <td>0.6521</td>
                                                    <td>0.0725</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <h5 class="dashboard-title">优化建议</h5>
                                    <div class="card">
                                        <div class="card-body">
                                            <ul>
                                                <li><strong>提高用户满意度的策略</strong>: 针对8.5小时左右的满意度低谷，可增加充电桩动态调度频率和高峰期预约充电激励机制。</li>
                                                <li><strong>提高运营商利润的策略</strong>: 优化3.2小时的充电桩使用率，并调整峰谷电价差，引导用户向利润更高的时段转移。</li>
                                                <li><strong>提高电网友好度的策略</strong>: 在19.5小时实施更严格的有序充电控制，增加光伏+储能一体化充电站比例，缓解电网压力。</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 用户分析 -->
                            <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">用户类型分布</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="userTypeChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">24小时充电需求</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="hourlyDemandChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">平均充电电量</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="avgSocChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">充电频率</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="chargingFrequencyChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">用户行为分析总结</h5>
                                    </div>
                                    <div class="card-body">
                                        <ul>
                                            <li><strong>高峰期充电需求</strong>: 早高峰(7-9点)和晚高峰(18-20点)是充电需求最高的时段，需重点优化这两个时段的充电资源分配。</li>
                                            <li><strong>用户类型差异</strong>: 出租车和网约车用户更倾向于快充且充电SOC较低，而私家车用户更喜欢完全充电且对等待时间不太敏感。</li>
                                            <li><strong>用户满意度影响因素</strong>: 分析表明等待时间是影响用户满意度的最重要因素，其次是充电速度和价格。</li>
                                            <li><strong>优化方向</strong>: 针对不同用户类型提供差异化服务，如为商业用户提供预约优先和快充服务，为私家车用户提供低谷时段优惠等。</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- 电网分析 -->
                            <div class="tab-pane fade" id="grid" role="tabpanel" aria-labelledby="grid-tab">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">24小时电网负载对比</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="hourlyLoadChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">峰值负载比较</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="peakLoadChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">负载均衡性</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="loadVarianceChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">可再生能源利用率</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="renewableChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">电网影响分析总结</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th>评价指标</th>
                                                        <th>有序调度</th>
                                                        <th>无序充电</th>
                                                        <th>改善比例</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="gridImpactTableBody">
                                                    <tr>
                                                        <td>峰值负载削减</td>
                                                        <td>78.5%</td>
                                                        <td>94.2%</td>
                                                        <td class="text-success">16.7%↓</td>
                                                    </tr>
                                                    <tr>
                                                        <td>负载方差</td>
                                                        <td>124.3</td>
                                                        <td>256.8</td>
                                                        <td class="text-success">51.6%↓</td>
                                                    </tr>
                                                    <tr>
                                                        <td>可再生能源利用率</td>
                                                        <td>48.5%</td>
                                                        <td>32.1%</td>
                                                        <td class="text-success">51.1%↑</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="mt-4">
                                            <h6>结论及建议:</h6>
                                            <ul>
                                                <li>有序调度方案在高峰时段可平均削减峰值负载16.7%，显著减轻电网压力。</li>
                                                <li>有序调度使负载方差减少51.6%，大幅提高电网稳定性和设备利用效率。</li>
                                                <li>通过将充电需求引导至光伏发电高峰时段，可再生能源利用率提升51.1%。</li>
                                                <li>建议进一步扩大储能系统配置，增强系统调峰能力；同时加强峰谷电价差异，提高用户参与削峰填谷的积极性。</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 策略对比 -->
                            <div class="tab-pane fade" id="comparison" role="tabpanel" aria-labelledby="comparison-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">策略雷达图</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="strategyComparisonChart"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">策略对比表</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table table-striped">
                                                        <thead>
                                                            <tr>
                                                                <th>策略</th>
                                                                <th>用户满意度</th>
                                                                <th>运营商利润</th>
                                                                <th>电网友好度</th>
                                                                <th>综合评分</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="strategyTableBody">
                                                            <tr>
                                                                <td>用户优先</td>
                                                                <td class="text-success">0.85</td>
                                                                <td>0.65</td>
                                                                <td>0.55</td>
                                                                <td>0.72</td>
                                                            </tr>
                                                            <tr>
                                                                <td>利润优先</td>
                                                                <td>0.65</td>
                                                                <td class="text-success">0.85</td>
                                                                <td>0.60</td>
                                                                <td>0.70</td>
                                                            </tr>
                                                            <tr>
                                                                <td>电网友好</td>
                                                                <td>0.60</td>
                                                                <td>0.65</td>
                                                                <td class="text-success">0.85</td>
                                                                <td>0.70</td>
                                                            </tr>
                                                            <tr>
                                                                <td>平衡策略</td>
                                                                <td>0.75</td>
                                                                <td>0.75</td>
                                                                <td>0.75</td>
                                                                <td class="text-success">0.78</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">策略适用场景分析</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>场景</th>
                                                                <th>最佳策略</th>
                                                                <th>推荐权重</th>
                                                                <th>特点</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>工作日普通时段</td>
                                                                <td>平衡策略</td>
                                                                <td>0.33:0.33:0.34</td>
                                                                <td>充电需求稳定，各方目标均衡</td>
                                                            </tr>
                                                            <tr>
                                                                <td>上下班高峰期</td>
                                                                <td>电网友好策略</td>
                                                                <td>0.2:0.2:0.6</td>
                                                                <td>电网负载高，需优先考虑电网安全</td>
                                                            </tr>
                                                            <tr>
                                                                <td>夜间低谷期</td>
                                                                <td>运营商利润策略</td>
                                                                <td>0.2:0.6:0.2</td>
                                                                <td>电价低，充电桩空闲率高</td>
                                                            </tr>
                                                            <tr>
                                                                <td>假日高峰</td>
                                                                <td>用户优先策略</td>
                                                                <td>0.6:0.2:0.2</td>
                                                                <td>用户需求高，等待时间敏感度高</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框 -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">图表详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="" class="modal-img" id="modalImage" alt="图表详情">
                </div>
            </div>
        </div>
    </div>

    <!-- 引入JS库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
    <!-- 引入自定义JS -->
    <script src="js/charts.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui-controller.js"></script>
</body>
</html>